{"remainingRequest":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\src\\pages\\PostPage\\components\\Panel\\PanelPersonInfoEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\src\\pages\\PostPage\\components\\Panel\\PanelPersonInfoEdit.vue","mtime":1590508887520},{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590508866028},{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\babel-loader\\lib\\index.js","mtime":1590508865567},{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590508866028},{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js","mtime":1590508885674}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBMaW5lV29yZExpbmUgZnJvbSAiQC9jb21wb25lbnRzL0xpbmVXb3JkTGluZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGFuZWxQZXJzb25JbmZvRWRpdCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJJZDogMSwKICAgICAgZG9tYWluOiAnaHR0cHM6Ly91cGxvYWQucWluaXVwLmNvbScsCiAgICAgIHBvc3REYXRhOiB7CiAgICAgICAga2V5OiBudWxsLAogICAgICAgIHRva2VuOiAnJwogICAgICB9LAogICAgICBxaW5pdWFkZHI6ICdodHRwOi8vcTlzdGxxODdxLmJrdC5jbG91ZGRuLmNvbScsCiAgICAgIGltYWdlVXJsOiAnJywKICAgICAgbmlja05hbWU6ICcnLAogICAgICBwZXJzb25UZXh0OiAnJywKICAgICAgZ2VuZGVyUmFkaW86ICfnlLcnCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIHVzZXJJbmZvOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMaW5lV29yZExpbmU6IExpbmVXb3JkTGluZQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMudXNlcklkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnSUQnKTsKICAgICAgdGhpcy5pbWFnZVVybCA9IHRoaXMudXNlckluZm8udXNlckltZzsKICAgICAgdGhpcy5uaWNrTmFtZSA9IHRoaXMudXNlckluZm8udXNlck5pY2VOYW1lOwogICAgICB0aGlzLnBlcnNvblRleHQgPSB0aGlzLnVzZXJJbmZvLndvcmRzOwogICAgICB0aGlzLmF4aW9zLmdldCgnaHR0cDovL3p6emlhLm5ldDo4MDgwL3Fpbml1LycsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGFjY2Vzc0tleTogIlJ3QzR1STVqYkNmRTNJVXVva0VQN3BhWE9RUUExNG1jRDg3TVE2bWwiLAogICAgICAgICAgc2VjcmV0S2V5OiAibzZjUG1vN1ItUVVXNDExM2sxTU5OaU5qV0hPeXpuai1GRVJ5UF94YSIsCiAgICAgICAgICBidWNrZXQ6ICJkYWlseWRhdGEiCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnBvc3REYXRhLnRva2VuID0gcmVzcG9uc2UuZGF0YS50b2tlbjsgLy8gdGhpcy5wb3N0RGF0YS5rZXkgPSByZXNwb25zZS5kYXRhLmtleQoKICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5wb3N0RGF0YSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDmj5DkuqTkuKrkurrkv6Hmga/kv67mlLkKICAgICAqLwogICAgZWRpdEluZm86IGZ1bmN0aW9uIGVkaXRJbmZvKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYXhpb3MucG9zdCgiIi5jb25jYXQodGhpcy5HTE9CQUwuYXBpVXJsLCAiL3VwZGF0ZVVzZXJJbmZvIiksIHsKICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLAogICAgICAgIHVzZXJOYW1lOiB0aGlzLm5pY2tOYW1lLAogICAgICAgIGdlbmRlcjogdGhpcy5nZW5kZXJSYWRpbywKICAgICAgICBwcm9maWxlOiB0aGlzLnBlcnNvblRleHQsCiAgICAgICAgdXNlckltZzogdGhpcy5pbWFnZVVybAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueS4quS6uuS/oeaBr+aIkOWKnyIsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLlj5HnlJ/kuobkuI3lj6/pooTnn6XnmoTplJnor6/vvIzor7fnqI3lkI7lho3or5Xor5UiLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLiRlbWl0KCdmaW5pc2hFZGl0SW5mbycpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcykgewogICAgICAvLyB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlLnJhdyk7CiAgICAgIHRoaXMuaW1hZ2VVcmwgPSAiIi5jb25jYXQodGhpcy5xaW5pdWFkZHIsICIvIikuY29uY2F0KHJlcy5rZXkpOyAvLyBjb25zb2xlLmxvZyhyZXMpCgogICAgICBjb25zb2xlLmxvZyh0aGlzLmltYWdlVXJsKTsKICAgIH0sCiAgICBiZWZvcmVBdmF0YXJVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlKSB7CiAgICAgIHZhciBpc0pQRyA9IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnOwogICAgICB2YXIgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+WPquiDveaYryBKUEcg5qC85byPIScpOwogICAgICB9CgogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhJyk7CiAgICAgIH0KCiAgICAgIHRoaXMucG9zdERhdGEua2V5ID0gInVwbG9hZF9waWNfIi5jb25jYXQoZmlsZS5uYW1lKTsKICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH0sCiAgICBlcnJvckhhbmRsZXI6IGZ1bmN0aW9uIGVycm9ySGFuZGxlcihlcnIsIGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"sources":["PanelPersonInfoEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div style=\"width: 100%;display: flex;flex-direction: row;justify-content: space-between;\">\r\n        <div class=\"InformationPanel\">\r\n            <LineWordLine>上传头像</LineWordLine>\r\n            <div class=\"AvatarUploader\">\r\n                <el-upload\r\n                        class=\"avatar-uploader\"\r\n                        :action=\"domain\"\r\n                        :data=\"postData\"\r\n                        :show-file-list=\"false\"\r\n                        :on-success=\"handleAvatarSuccess\"\r\n                        :on-error=\"errorHandler\"\r\n                        :before-upload=\"beforeAvatarUpload\">\r\n                    <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n                    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                </el-upload>\r\n            </div>\r\n            <LineWordLine>修改信息</LineWordLine>\r\n            <div>\r\n                <el-form>\r\n                    <el-form-item label=\"新的昵称\">\r\n                        <el-input v-model=\"nickName\"></el-input>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n        <div class=\"InformationPanel\">\r\n            <LineWordLine>\r\n                其他信息\r\n            </LineWordLine>\r\n            <div>\r\n                <el-form>\r\n                    <el-form-item label=\"性别\">\r\n                        <el-radio label=\"男\" v-model=\"genderRadio\">男</el-radio>\r\n                        <el-radio label=\"女\" v-model=\"genderRadio\">女</el-radio>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"个性签名\">\r\n                        <el-input\r\n                                :row=\"3\"\r\n                                placehoder=\"请输入内容\"\r\n                                type=\"textarea\"\r\n                                v-model=\"personText\">\r\n                        </el-input>\r\n                    </el-form-item>\r\n                    <div>\r\n                        <button @click.prevent=\"editInfo\" class=\"CommonButton\">提交</button>\r\n                    </div>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import LineWordLine from \"@/components/LineWordLine\";\r\n\r\n  export default {\r\n    name: \"PanelPersonInfoEdit\",\r\n    data() {\r\n      return {\r\n        userId: 1,\r\n        domain: 'https://upload.qiniup.com',\r\n        postData:{\r\n          key:null,\r\n          token:''\r\n        },\r\n        qiniuaddr: 'http://q9stlq87q.bkt.clouddn.com',\r\n        imageUrl: '',\r\n        nickName: '',\r\n        personText: '',\r\n        genderRadio: '男'\r\n      };\r\n    },\r\n    props: {\r\n      userInfo: {\r\n        required: true\r\n      }\r\n    },\r\n    components: {\r\n      LineWordLine,\r\n    },\r\n    methods: {\r\n      init() {\r\n        this.userId = sessionStorage.getItem('ID');\r\n        this.imageUrl = this.userInfo.userImg\r\n        this.nickName = this.userInfo.userNiceName;\r\n        this.personText = this.userInfo.words;\r\n        this.axios.get('http://zzzia.net:8080/qiniu/',{\r\n          params: {\r\n            accessKey: \"RwC4uI5jbCfE3IUuokEP7paXOQQA14mcD87MQ6ml\",\r\n            secretKey: \"o6cPmo7R-QUW4113k1MNNiNjWHOyznj-FERyP_xa\",\r\n            bucket: \"dailydata\"\r\n          }\r\n        }).then((response) =>{\r\n          this.postData.token=response.data.token\r\n          // this.postData.key = response.data.key\r\n          console.log(this.postData)\r\n        })\r\n      },\r\n      /**\r\n       * @description 提交个人信息修改\r\n       */\r\n      editInfo() {\r\n        this.axios.post(`${this.GLOBAL.apiUrl}/updateUserInfo`, {\r\n          userId: this.userId,\r\n          userName: this.nickName,\r\n          gender: this.genderRadio,\r\n          profile: this.personText,\r\n          userImg:this.imageUrl,\r\n        })\r\n          .then((response) => {\r\n            console.log(response)\r\n            if (response.data.success) {\r\n              this.$message({\r\n                message: \"修改个人信息成功\",\r\n                type: 'success'\r\n              })\r\n            } else {\r\n              this.$message({\r\n                message: \"发生了不可预知的错误，请稍后再试试\",\r\n                type: \"warning\"\r\n              })\r\n            }\r\n            this.$emit('finishEditInfo')\r\n          })\r\n      },\r\n      handleAvatarSuccess(res) {\r\n        // this.imageUrl = URL.createObjectURL(file.raw);\r\n        this.imageUrl = `${this.qiniuaddr}/${res.key}`\r\n        // console.log(res)\r\n        console.log(this.imageUrl)\r\n      },\r\n      beforeAvatarUpload(file) {\r\n        const isJPG = file.type === 'image/jpeg';\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n        if (!isJPG) {\r\n          this.$message.error('上传头像图片只能是 JPG 格式!');\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error('上传头像图片大小不能超过 2MB!');\r\n        }\r\n        this.postData.key = `upload_pic_${file.name}`\r\n        return isJPG && isLt2M;\r\n      },\r\n      errorHandler(err,file){\r\n        console.log(file)\r\n        console.log(err);\r\n      }\r\n    },\r\n    created() {\r\n      this.init();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import \"~@/CSS/Common.less\";\r\n\r\n    .InformationPanel {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: flex-start;\r\n        width: 100%;\r\n        margin: 0 auto;\r\n        .setSize(350px, 425px);\r\n    }\r\n\r\n    .AvatarUploader {\r\n        width: 100%;\r\n        margin: 25px auto 0 auto;\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n\r\n\r\n</style>\r\n\r\n<style lang=\"less\">\r\n    .avatar-uploader {\r\n        .el-upload {\r\n            border: 1px dashed #828282;\r\n            border-radius: 6px;\r\n            cursor: pointer;\r\n            position: relative;\r\n            overflow: hidden;\r\n        }\r\n\r\n        .el-upload:hover {\r\n            border-color: #000000;\r\n        }\r\n\r\n        .avatar-uploader-icon {\r\n            font-size: 28px;\r\n            color: #8c939d;\r\n            width: 178px;\r\n            height: 178px;\r\n            line-height: 178px;\r\n            text-align: center;\r\n        }\r\n\r\n        .avatar {\r\n            width: 178px;\r\n            height: 178px;\r\n            display: block;\r\n        }\r\n    }\r\n</style>"],"sourceRoot":"src/pages/PostPage/components/Panel"}]}