{"remainingRequest":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\src\\pages\\PostPage\\components\\Panel\\PanelPostEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\src\\pages\\PostPage\\components\\Panel\\PanelPostEdit.vue","mtime":1590322633695},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590322393809},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\babel-loader\\lib\\index.js","mtime":1590322384777},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590322393809},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js","mtime":1590322614216}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBCdXMgZnJvbSAiQC9KUy9idXMuanMiOwppbXBvcnQgTGluZVdvcmRMaW5lIGZyb20gIkAvY29tcG9uZW50cy9MaW5lV29yZExpbmUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBvc3RQYW5lbCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzU2hvdzogdHJ1ZSwKICAgICAgdGFnczogJycsCiAgICAgIHBvc3RUZXh0OiAnJywKICAgICAgZGlhbG9nSW1hZ2VVcmw6ICcnLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgc2hvd01vZGFsOiBmYWxzZSwKICAgICAgZG9tYWluOiAnaHR0cHM6Ly91cGxvYWQucWluaXVwLmNvbScsCiAgICAgIHFpbml1YWRkcjogJ2h0dHA6Ly9xOXN0bHE4N3EuYmt0LmNsb3VkZG4uY29tJywKICAgICAgcG9zdERhdGE6IHsKICAgICAgICBrZXk6ICcnLAogICAgICAgIHRva2VuOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5Yid5aeL5YyW77yM6I635Y+W5LiD54mbdG9rZW4KICAgICAqLwogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMudXNlcklkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnSUQnKTsKICAgICAgdGhpcy5heGlvcy5nZXQoJ2h0dHA6Ly96enppYS5uZXQ6ODA4MC9xaW5pdS8nLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBhY2Nlc3NLZXk6ICJSd0M0dUk1amJDZkUzSVV1b2tFUDdwYVhPUVFBMTRtY0Q4N01RNm1sIiwKICAgICAgICAgIHNlY3JldEtleTogIm82Y1BtbzdSLVFVVzQxMTNrMU1OTmlOaldIT3l6bmotRkVSeVBfeGEiLAogICAgICAgICAgYnVja2V0OiAiZGFpbHlkYXRhIgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5wb3N0RGF0YS50b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47IC8vIHRoaXMucG9zdERhdGEua2V5ID0gcmVzcG9uc2UuZGF0YS5rZXkKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOS9v+eUqOS6i+S7tuaAu+e6v+WPkemAgeWujOaIkOe8lui+keS/oeWPtwogICAgICogQHBhcmFtIHtzdHJpbmd9IGZsYWcg5a6M5oiQ5L+h5Y+3LOWPr+iDveaciSJmaW5pc2gi5q2j5bi457uT5p2f77yM5ZKM4oCcY2xvc2Ui55u05o6l5YWz6Zet44CCCiAgICAgKi8KICAgIGZpbmlzaEVkaXQ6IGZ1bmN0aW9uIGZpbmlzaEVkaXQoZmxhZykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy5heGlvcy5wb3N0KCIiLmNvbmNhdCh0aGlzLkdMT0JBTC5hcGlVcmwsICIvYWRkcG9zdCIpLCB7CiAgICAgICAgcG9zdEltZzogdGhhdC5kaWFsb2dJbWFnZVVybCwKICAgICAgICBwb3N0Q29udGVudDogdGhhdC5wb3N0VGV4dCwKICAgICAgICBhbm9ueW06IDAsCiAgICAgICAgYXJlYUlkOiAwLAogICAgICAgIHVzZXJJZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnSUQnKSwKICAgICAgICBmb3J3YXJkUG9zdElkOiAtMQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIucG9zdFRleHQgPSAnJzsKICAgICAgICBfdGhpczIuZGlhbG9nSW1hZ2VVcmwgPSAnJzsKCiAgICAgICAgX3RoaXMyLiRyZWZzLnBpY3R1cmVVcGxvYWRlci5jbGVhckZpbGVzKCk7CgogICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi5kaWFsb2dJbWFnZVVybCk7CiAgICAgICAgQnVzLiRlbWl0KCJmaW5pc2hFZGl0IiwgZmxhZyk7IC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICB9KTsKICAgIH0sCiAgICBiZWZvcmVJbWdVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZUltZ1VwbG9hZChmaWxlKSB7CiAgICAgIHRoaXMucG9zdERhdGEua2V5ID0gInVwbG9hZF9waWNfIi5jb25jYXQoZmlsZS5uYW1lKTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zb2xlLmxvZyhmaWxlLCBmaWxlTGlzdCk7CiAgICB9LAogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICAvLyBjb25zb2xlLmxvZyhmaWxlKQogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlUGljdHVyZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVBpY3R1cmVTdWNjZXNzKHJlcykgewogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gIiIuY29uY2F0KHRoaXMucWluaXVhZGRyLCAiLyIpLmNvbmNhdChyZXMua2V5KTsKICAgICAgY29uc29sZS5sb2codGhpcy5kaWFsb2dJbWFnZVVybCk7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMaW5lV29yZExpbmU6IExpbmVXb3JkTGluZQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTs="},{"version":3,"sources":["PanelPostEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,OAAA,GAAA,MAAA,aAAA;AACA,OAAA,YAAA,MAAA,2BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,cAAA,EAAA,EAJA;AAKA,MAAA,aAAA,EAAA,KALA;AAMA,MAAA,SAAA,EAAA,KANA;AAOA,MAAA,MAAA,EAAA,2BAPA;AAQA,MAAA,SAAA,EAAA,kCARA;AASA,MAAA,QAAA,EAAA;AACA,QAAA,GAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA;AAFA;AATA,KAAA;AAcA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA;;;AAGA,IAAA,IAJA,kBAIA;AAAA;;AACA,WAAA,MAAA,GAAA,cAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,8BAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,SAAA,EAAA,0CADA;AAEA,UAAA,SAAA,EAAA,0CAFA;AAGA,UAAA,MAAA,EAAA;AAHA;AADA,OAAA,EAMA,IANA,CAMA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,KAAA,CADA,CAEA;AACA;AACA,OAVA;AAWA,KAjBA;;AAkBA;;;;AAIA,IAAA,UAtBA,sBAsBA,IAtBA,EAsBA;AAAA;;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,IAAA,WAAA,KAAA,MAAA,CAAA,MAAA,eAAA;AACA,QAAA,OAAA,EAAA,IAAA,CAAA,cADA;AAEA,QAAA,WAAA,EAAA,IAAA,CAAA,QAFA;AAGA,QAAA,MAAA,EAAA,CAHA;AAIA,QAAA,MAAA,EAAA,CAJA;AAKA,QAAA,MAAA,EAAA,cAAA,CAAA,OAAA,CAAA,IAAA,CALA;AAMA,QAAA,aAAA,EAAA,CAAA;AANA,OAAA,EAQA,IARA,CAQA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,cAAA,GAAA,EAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,eAAA,CAAA,UAAA;;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,cAAA;AACA,QAAA,GAAA,CAAA,KAAA,CAAA,YAAA,EAAA,IAAA,EALA,CAMA;AACA,OAfA;AAgBA,KAxCA;AAyCA,IAAA,eAzCA,2BAyCA,IAzCA,EAyCA;AACA,WAAA,QAAA,CAAA,GAAA,wBAAA,IAAA,CAAA,IAAA;AACA,KA3CA;AA4CA,IAAA,YA5CA,wBA4CA,IA5CA,EA4CA,QA5CA,EA4CA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EAAA,QAAA;AACA,KA9CA;AA+CA,IAAA,wBA/CA,oCA+CA,IA/CA,EA+CA;AACA;AACA,WAAA,cAAA,GAAA,IAAA,CAAA,GAAA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KAnDA;AAoDA,IAAA,oBApDA,gCAoDA,GApDA,EAoDA;AACA,WAAA,cAAA,aAAA,KAAA,SAAA,cAAA,GAAA,CAAA,GAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,cAAA;AACA;AAvDA,GAlBA;AA2EA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GA3EA;AA8EA,EAAA,OA9EA,qBA8EA;AACA,SAAA,IAAA;AACA;AAhFA,CAAA","sourcesContent":["<template>\r\n    <div class=\"Panel\" v-if=\"isShow\">\r\n        <div @click=\"finishEdit(`close`)\"\r\n             class=\"Mask\"></div>\r\n        <div class=\"EditPanel\">\r\n            <div class=\"PicturePanel\">\r\n                <el-upload\r\n                        ref=\"pictureUploader\"\r\n                        :action=\"domain\"\r\n                        :data=\"postData\"\r\n                        :on-preview=\"handlePictureCardPreview\"\r\n                        :on-remove=\"handleRemove\"\r\n                        :on-success=\"handlePictureSuccess\"\r\n                        :before-upload=\"beforeImgUpload\"\r\n                        list-type=\"picture-card\">\r\n                    <i class=\"el-icon-plus\"></i>\r\n                </el-upload>\r\n                <el-dialog :modal=\"showModal\" :visible.sync=\"dialogVisible\">\r\n                    <el-image :src=\"dialogImageUrl\" alt=\"\" width=\"100%\"></el-image>\r\n                </el-dialog>\r\n            </div>\r\n            <div class=\"TextPanel\">\r\n                <div class=\"logo\">\r\n                    <img src=\"@/assets/NavBar/logo.png\">\r\n                </div>\r\n                <LineWordLine>编辑</LineWordLine>\r\n                <el-form>\r\n                    <el-form-item label=\"文本内容：\">\r\n                        <el-input\r\n                                :row=\"5\"\r\n                                placehoder=\"请输入内容\"\r\n                                type=\"textarea\"\r\n                                v-model=\"postText\">\r\n                        </el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"Tags（请以空格分隔）\">\r\n                        <el-input :disabled=\"true\" v-model=\"tags\"></el-input>\r\n                    </el-form-item>\r\n                    <input @click=\"finishEdit(`finish`)\" class=\"CommonButton\" id=\"TextEditButton\" type=\"button\"\r\n                           value=\"完成\">\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import Bus from \"@/JS/bus.js\"\r\n  import LineWordLine from \"@/components/LineWordLine\";\r\n\r\n  export default {\r\n    name: \"PostPanel\",\r\n    data() {\r\n      return {\r\n        isShow: true,\r\n        tags: '',\r\n        postText: '',\r\n        dialogImageUrl: '',\r\n        dialogVisible: false,\r\n        showModal: false,\r\n        domain: 'https://upload.qiniup.com',\r\n        qiniuaddr: 'http://q9stlq87q.bkt.clouddn.com',\r\n        postData: {\r\n          key: '',\r\n          token: ''\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      /**\r\n       * @description 初始化，获取七牛token\r\n       */\r\n      init() {\r\n        this.userId = sessionStorage.getItem('ID');\r\n        this.axios.get('http://zzzia.net:8080/qiniu/', {\r\n          params: {\r\n            accessKey: \"RwC4uI5jbCfE3IUuokEP7paXOQQA14mcD87MQ6ml\",\r\n            secretKey: \"o6cPmo7R-QUW4113k1MNNiNjWHOyznj-FERyP_xa\",\r\n            bucket: \"dailydata\"\r\n          }\r\n        }).then((response) => {\r\n          this.postData.token = response.data.token\r\n          // this.postData.key = response.data.key\r\n          // console.log(response)\r\n        })\r\n      },\r\n      /**\r\n       * @description 使用事件总线发送完成编辑信号\r\n       * @param {string} flag 完成信号,可能有\"finish\"正常结束，和“close\"直接关闭。\r\n       */\r\n      finishEdit(flag) {\r\n        let that = this;\r\n        this.axios.post(`${this.GLOBAL.apiUrl}/addpost`, {\r\n          postImg: that.dialogImageUrl,\r\n          postContent: that.postText,\r\n          anonym: 0,\r\n          areaId: 0,\r\n          userId: sessionStorage.getItem('ID'),\r\n          forwardPostId: -1,\r\n        })\r\n          .then(() => {\r\n            this.postText='';\r\n            this.dialogImageUrl='';\r\n            this.$refs.pictureUploader.clearFiles();\r\n            console.log(this.dialogImageUrl)\r\n            Bus.$emit(\"finishEdit\", flag);\r\n            // console.log(response)\r\n          })\r\n      },\r\n      beforeImgUpload(file) {\r\n        this.postData.key=`upload_pic_${file.name}`;\r\n      },\r\n      handleRemove(file, fileList) {\r\n        console.log(file, fileList);\r\n      },\r\n      handlePictureCardPreview(file) {\r\n        // console.log(file)\r\n        this.dialogImageUrl = file.url;\r\n        this.dialogVisible = true;\r\n      },\r\n      handlePictureSuccess(res) {\r\n        this.dialogImageUrl = `${this.qiniuaddr}/${res.key}`\r\n        console.log(this.dialogImageUrl)\r\n      }\r\n    },\r\n    components: {\r\n      LineWordLine\r\n    },\r\n    created() {\r\n      this.init()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import \"~@/CSS/Common.less\";\r\n\r\n    .EditPanel {\r\n        background-color: whitesmoke;\r\n        .setMinSize(850px, 500px);\r\n        .setBorder(0px);\r\n        border-radius: 2px;\r\n        box-shadow: 0 0 3px #2c2d2c;\r\n        position: fixed;\r\n        top: calc(50% - 250px);\r\n        left: calc(50% - 425px);\r\n        z-index: 15;\r\n        display: flex;\r\n    }\r\n\r\n    .PicturePanel {\r\n        .setSize(468px, 500px);\r\n        border-right: 1px solid black;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        padding-left: 10px;\r\n        padding-top: 15px;\r\n    }\r\n\r\n    .logo {\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n\r\n    .TextPanel {\r\n        width: 350px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding: 0 9px;\r\n        justify-content: center;\r\n\r\n        label {\r\n            margin: 5px auto;\r\n        }\r\n    }\r\n</style>"],"sourceRoot":"src/pages/PostPage/components/Panel"}]}