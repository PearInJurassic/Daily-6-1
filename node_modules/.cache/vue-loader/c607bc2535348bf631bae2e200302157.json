{"remainingRequest":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Macbook Pro\\Desktop\\工作区\\src\\pages\\AdminPage\\AdminPage.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\src\\pages\\AdminPage\\AdminPage.vue","mtime":1590564762804},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\css-loader\\dist\\cjs.js","mtime":1590550700318},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1590550713663},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\postcss-loader\\src\\index.js","mtime":1590550707248},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590550697423},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\vue-loader\\lib\\index.js","mtime":1590550713661}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWhlYWRlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODE4NzhlOwogICAgY29sb3I6ICMzMzM7CiAgICBsaW5lLWhlaWdodDogNjBweDsKfQoKLmVsLWFzaWRlIHsKICAgIGNvbG9yOiAjMzMzOwp9CgouZWwtdGFibGUgLmZyb3plbi1yb3cgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2YzYjFhZjsKfQo="},{"version":3,"sources":["AdminPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2NA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"AdminPage.vue","sourceRoot":"src/pages/AdminPage","sourcesContent":["<template>\r\n    <div>\r\n        <el-container style=\"height: 100%; border: 1px solid #eee\">\r\n            <el-aside style=\"background-color: rgb(238, 241, 246)\" width=\"200px\">\r\n                <el-menu :default-openeds=\"['1', '3']\">\r\n                    <el-submenu index=\"1\">\r\n                        <template slot=\"title\"><i class=\"el-icon-message\"></i>Daily6+1 管理员操作</template>\r\n                        <el-menu-item-group>\r\n                            <template slot=\"title\">查看</template>\r\n                            <el-menu-item index=\"1-1\">查看待审核帖子</el-menu-item>\r\n                            <!--                            <el-menu-item index=\"1-2\">冻结用户</el-menu-item>-->\r\n                        </el-menu-item-group>\r\n                    </el-submenu>\r\n                </el-menu>\r\n            </el-aside>\r\n\r\n            <el-container>\r\n                <el-header style=\"text-align: right; font-size: 12px\">\r\n                    <el-dropdown @command=\"handleCommand\">\r\n                        <i class=\"el-icon-setting\" style=\"margin-right: 15px\"></i>\r\n                        <el-dropdown-menu slot=\"dropdown\">\r\n                            <el-dropdown-item>查看</el-dropdown-item>\r\n                            <el-dropdown-item>新增</el-dropdown-item>\r\n                            <el-dropdown-item>冻结</el-dropdown-item>\r\n                            <el-dropdown-item command=\"quit\">退出</el-dropdown-item>\r\n                        </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                    <span>{{adminInfo.userName}}</span>\r\n                </el-header>\r\n\r\n                <el-main>\r\n                    <el-table :data=\"reportTableData\"\r\n                              v-loading=\"loading\"\r\n                              :row-class-name=\"tableFrozeClass\">\r\n                        <el-table-column label=\"帖子ID\" prop=\"postId\" sortable>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"是否匿名\" prop=\"anonym\" width=\"140\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"地区信息\" prop=\"areaId\" width=\"140\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"被举报次数\" prop=\"tipoffNum\" width=\"140\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"转发次数\" prop=\"forwardNum\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"帖子内容\" prop=\"postContent\" sortable width=\"320\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"发帖时间\" prop=\"postCreateTime\" sortable>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"上传时间\" prop=\"postUpdateTime\" sortable>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"用户id\" prop=\"userId\" sortable>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"操作\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-button @click=\"handleDetail(scope.row)\" size=\"small\" type=\"text\">查看详情</el-button>\r\n                                <el-button @click=\"handleClick(scope.row)\" size=\"small\" type=\"text\">冻结用户</el-button>\r\n                                <el-button @click=\"handleClick2(scope.row)\" size=\"small\" type=\"text\">取消冻结</el-button>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </el-main>\r\n            </el-container>\r\n        </el-container>\r\n        <el-dialog\r\n                :visible.sync=\"dialogVisible\"\r\n                title=\"是否要冻结用户？\"\r\n                width=\"30%\">\r\n            <span>确定要冻结该用户吗？</span>\r\n            <span class=\"dialog-footer\" slot=\"footer\">\r\n                <el-button @click=\"cancelFreeze\">取 消</el-button>\r\n                <el-button @click=\"confirmFrezze\" type=\"primary\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n         <el-dialog\r\n                :visible.sync=\"dialogVisible2\"\r\n                title=\"是否要解冻用户？\"\r\n                width=\"30%\">\r\n            <span>确定要解冻该用户吗？</span>\r\n            <span class=\"dialog-footer\" slot=\"footer\">\r\n                <el-button @click=\"cancelFreeze\">取 消</el-button>\r\n                <el-button @click=\"confirmUnfrezze\" type=\"primary\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n        <PostDetail v-if=\"detailDialogVisible\"\r\n                    :itemInfo=\"selectPostItem\"\r\n                    :isLike=\"0\"\r\n                    :pInfo=\"adminInfo\"\r\n                    @detailState=\"changeDetailState\">\r\n        </PostDetail>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import PostDetail from \"@/pages/PostPage/components/Post/PostDetail\";\r\n  export default {\r\n    name: \"AdminPage\",\r\n    data() {\r\n      return {\r\n        detailDialogVisible:false,\r\n        dialogVisible: false,\r\n        dialogVisible2: false,\r\n        loading: true,\r\n        reportTableData: [],\r\n        selectUser:0,\r\n        selectPostItem:{},\r\n        adminInfo:{},\r\n        frozenList:[],\r\n      }\r\n    },\r\n    components:{\r\n      PostDetail\r\n    },\r\n    methods: {\r\n      init() {\r\n        // 请求后端数据,查询数据源\r\n        this.$axios.get(`${this.GLOBAL.apiUrl}/getrequireauditpost`)\r\n          .then((response) => {\r\n            console.log(response)\r\n            let data = response.data.postList;\r\n            for (let index in data) {\r\n              this.reportTableData.push(data[index])\r\n            }\r\n            this.frozenList=response.data.frozenList;\r\n            console.log(this.frozenList)\r\n            this.loading = false;\r\n          })\r\n      },\r\n      handleClick(row) {\r\n        this.selectUser = row.userId,\r\n        this.dialogVisible=true\r\n      },\r\n      handleClick2(row) {\r\n        this.selectUser = row.userId,\r\n        this.dialogVisible2=true\r\n      },\r\n      /**\r\n       * @description 得到管理员信息\r\n       */\r\n      getAdminInfo() {\r\n        this.axios.get(`${this.GLOBAL.apiUrl}/getUserInfo`,{\r\n          params:{\r\n            userId:sessionStorage.getItem(\"adminId\")\r\n          }\r\n        }).then((response) => {\r\n          this.adminInfo=response.data.userInfo.user;\r\n          // console.log(response)\r\n        })\r\n      },\r\n      /**\r\n       * @description 冻结用户\r\n       */\r\n      confirmFrezze() {\r\n        // let data = new FormData();\r\n        // data.append(\"userId\",this.selectUser)\r\n        this.$axios.post(`${this.GLOBAL.apiUrl}/freeze`,{\r\n          userId:this.selectUser\r\n        })\r\n          .then(() => {\r\n            // console.log(response)\r\n          this.$message({\r\n            message:\"冻结成功\",\r\n            type:'success',\r\n          })\r\n        })\r\n        this.dialogVisible = false\r\n      },\r\n      /*\r\n       * @description 解冻用户\r\n       */\r\n      confirmUnfrezze(){\r\n         this.dialogVisible2 = false\r\n      },\r\n      cancelFreeze() {\r\n        this.dialogVisible = false\r\n      },\r\n      /**\r\n       * @description 查看详情\r\n       */\r\n      handleDetail(row) {\r\n        this.selectPostItem=row;\r\n        this.detailDialogVisible=true ;\r\n      },\r\n      changeDetailState () {\r\n        this.detailDialogVisible=false;\r\n      },\r\n      /**\r\n       * @description 冻结用户列被染色\r\n       */\r\n      tableFrozeClass({row,rowIndex}) {\r\n        console.log(row) //删除会认为row没有被使用过而报错.\r\n        // console.log(this.frozenList[rowIndex])\r\n        if(this.frozenList[rowIndex] == 0)\r\n          return \"frozen-row\"\r\n        return ''\r\n      },\r\n      /**\r\n       * @description 处理下拉菜单\r\n       */\r\n      handleCommand(command) {\r\n        switch (command) {\r\n            case 'quit':\r\n              window.location.href = \"/index.html\";\r\n              break;\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.init();\r\n      this.getAdminInfo();\r\n    }\r\n\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n<style>\r\n    .el-header {\r\n        background-color: #81878e;\r\n        color: #333;\r\n        line-height: 60px;\r\n    }\r\n\r\n    .el-aside {\r\n        color: #333;\r\n    }\r\n\r\n    .el-table .frozen-row {\r\n        background-color: #f3b1af;\r\n    }\r\n</style>"]}]}