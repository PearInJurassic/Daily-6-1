{"remainingRequest":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\src\\pages\\AdminPage\\AdminPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\src\\pages\\AdminPage\\AdminPage.vue","mtime":1590508887470},{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590508866028},{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\babel-loader\\lib\\index.js","mtime":1590508865567},{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590508866028},{"path":"C:\\Users\\Macbook Pro\\Desktop\\新建文件夹 (2)\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js","mtime":1590508885674}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IFBvc3REZXRhaWwgZnJvbSAiQC9wYWdlcy9Qb3N0UGFnZS9jb21wb25lbnRzL1Bvc3QvUG9zdERldGFpbCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWRtaW5QYWdlIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGV0YWlsRGlhbG9nVmlzaWJsZTpmYWxzZSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHJlcG9ydFRhYmxlRGF0YTogW10sCiAgICAgIHNlbGVjdFVzZXI6MCwKICAgICAgc2VsZWN0UG9zdEl0ZW06e30sCiAgICAgIGFkbWluSW5mbzp7fSwKICAgICAgZnJvemVuTGlzdDpbXSwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6ewogICAgUG9zdERldGFpbAogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgLy8g6K+35rGC5ZCO56uv5pWw5o2uLOafpeivouaVsOaNrua6kAogICAgICB0aGlzLiRheGlvcy5nZXQoYCR7dGhpcy5HTE9CQUwuYXBpVXJsfS9nZXRyZXF1aXJlYXVkaXRwb3N0YCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhLnBvc3RMaXN0OwogICAgICAgICAgZm9yIChsZXQgaW5kZXggaW4gZGF0YSkgewogICAgICAgICAgICB0aGlzLnJlcG9ydFRhYmxlRGF0YS5wdXNoKGRhdGFbaW5kZXhdKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5mcm96ZW5MaXN0PXJlc3BvbnNlLmRhdGEuZnJvemVuTGlzdDsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZnJvemVuTGlzdCkKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlQ2xpY2socm93KSB7CiAgICAgIHRoaXMuc2VsZWN0VXNlciA9IHJvdy51c2VySWQsCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZT10cnVlCiAgICB9LAogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5b6X5Yiw566h55CG5ZGY5L+h5oGvCiAgICAgKi8KICAgIGdldEFkbWluSW5mbygpIHsKICAgICAgdGhpcy5heGlvcy5nZXQoYCR7dGhpcy5HTE9CQUwuYXBpVXJsfS9nZXRVc2VySW5mb2AsewogICAgICAgIHBhcmFtczp7CiAgICAgICAgICB1c2VySWQ6c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYWRtaW5JZCIpCiAgICAgICAgfQogICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuYWRtaW5JbmZvPXJlc3BvbnNlLmRhdGEudXNlckluZm8udXNlcjsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgfSkKICAgIH0sCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDlhrvnu5PnlKjmiLcKICAgICAqLwogICAgY29uZmlybUZyZXp6ZSgpIHsKICAgICAgLy8gbGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgLy8gZGF0YS5hcHBlbmQoInVzZXJJZCIsdGhpcy5zZWxlY3RVc2VyKQogICAgICB0aGlzLiRheGlvcy5wb3N0KGAke3RoaXMuR0xPQkFMLmFwaVVybH0vZnJlZXplYCx7CiAgICAgICAgdXNlcklkOnRoaXMuc2VsZWN0VXNlcgogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZToi5Ya757uT5oiQ5YqfIiwKICAgICAgICAgIHR5cGU6J3N1Y2Nlc3MnLAogICAgICAgIH0pCiAgICAgIH0pCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgY2FuY2VsRnJlZXplKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgfSwKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOafpeeci+ivpuaDhQogICAgICovCiAgICBoYW5kbGVEZXRhaWwocm93KSB7CiAgICAgIHRoaXMuc2VsZWN0UG9zdEl0ZW09cm93OwogICAgICB0aGlzLmRldGFpbERpYWxvZ1Zpc2libGU9dHJ1ZSA7CiAgICB9LAogICAgY2hhbmdlRGV0YWlsU3RhdGUgKCkgewogICAgICB0aGlzLmRldGFpbERpYWxvZ1Zpc2libGU9ZmFsc2U7CiAgICB9LAogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5Ya757uT55So5oi35YiX6KKr5p+T6ImyCiAgICAgKi8KICAgIHRhYmxlRnJvemVDbGFzcyh7cm93LHJvd0luZGV4fSkgewogICAgICBjb25zb2xlLmxvZyhyb3cpIC8v5Yig6Zmk5Lya6K6k5Li6cm935rKh5pyJ6KKr5L2/55So6L+H6ICM5oql6ZSZLgogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZyb3plbkxpc3Rbcm93SW5kZXhdKQogICAgICBpZih0aGlzLmZyb3plbkxpc3Rbcm93SW5kZXhdID09IDApCiAgICAgICAgcmV0dXJuICJmcm96ZW4tcm93IgogICAgICByZXR1cm4gJycKICAgIH0sCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDlpITnkIbkuIvmi4noj5zljZUKICAgICAqLwogICAgaGFuZGxlQ29tbWFuZChjb21tYW5kKSB7CiAgICAgIHN3aXRjaCAoY29tbWFuZCkgewogICAgICAgICAgY2FzZSAncXVpdCc6CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi9pbmRleC5odG1sIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICAgIHRoaXMuZ2V0QWRtaW5JbmZvKCk7CiAgfQoKfQo="},{"version":3,"sources":["AdminPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"AdminPage.vue","sourceRoot":"src/pages/AdminPage","sourcesContent":["<template>\r\n    <div>\r\n        <el-container style=\"height: 100%; border: 1px solid #eee\">\r\n            <el-aside style=\"background-color: rgb(238, 241, 246)\" width=\"200px\">\r\n                <el-menu :default-openeds=\"['1', '3']\">\r\n                    <el-submenu index=\"1\">\r\n                        <template slot=\"title\"><i class=\"el-icon-message\"></i>Daily6+1 管理员操作</template>\r\n                        <el-menu-item-group>\r\n                            <template slot=\"title\">查看</template>\r\n                            <el-menu-item index=\"1-1\">查看待审核帖子</el-menu-item>\r\n                            <!--                            <el-menu-item index=\"1-2\">冻结用户</el-menu-item>-->\r\n                        </el-menu-item-group>\r\n                    </el-submenu>\r\n                </el-menu>\r\n            </el-aside>\r\n\r\n            <el-container>\r\n                <el-header style=\"text-align: right; font-size: 12px\">\r\n                    <el-dropdown @command=\"handleCommand\">\r\n                        <i class=\"el-icon-setting\" style=\"margin-right: 15px\"></i>\r\n                        <el-dropdown-menu slot=\"dropdown\">\r\n                            <el-dropdown-item>查看</el-dropdown-item>\r\n                            <el-dropdown-item>新增</el-dropdown-item>\r\n                            <el-dropdown-item>冻结</el-dropdown-item>\r\n                            <el-dropdown-item command=\"quit\">退出</el-dropdown-item>\r\n                        </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                    <span>{{adminInfo.userName}}</span>\r\n                </el-header>\r\n\r\n                <el-main>\r\n                    <el-table :data=\"reportTableData\"\r\n                              v-loading=\"loading\"\r\n                              :row-class-name=\"tableFrozeClass\">\r\n                        <el-table-column label=\"帖子ID\" prop=\"postId\" sortable>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"是否匿名\" prop=\"anonym\" width=\"140\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"地区信息\" prop=\"areaId\" width=\"140\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"被举报次数\" prop=\"tipoffNum\" width=\"140\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"转发次数\" prop=\"forwardNum\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"帖子内容\" prop=\"postContent\" sortable width=\"320\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"发帖时间\" prop=\"postCreateTime\" sortable>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"上传时间\" prop=\"postUpdateTime\" sortable>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"用户id\" prop=\"userId\" sortable>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"操作\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-button @click=\"handleDetail(scope.row)\" size=\"small\" type=\"text\">查看详情</el-button>\r\n                                <el-button @click=\"handleClick(scope.row)\" size=\"small\" type=\"text\">冻结用户</el-button>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </el-main>\r\n            </el-container>\r\n        </el-container>\r\n        <el-dialog\r\n                :visible.sync=\"dialogVisible\"\r\n                title=\"是否要冻结用户？\"\r\n                width=\"30%\">\r\n            <span>确定要冻结该用户吗？</span>\r\n            <span class=\"dialog-footer\" slot=\"footer\">\r\n                <el-button @click=\"cancelFreeze\">取 消</el-button>\r\n                <el-button @click=\"confirmFrezze\" type=\"primary\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n        <PostDetail v-if=\"detailDialogVisible\"\r\n                    :itemInfo=\"selectPostItem\"\r\n                    :isLike=\"0\"\r\n                    :pInfo=\"adminInfo\"\r\n                    @detailState=\"changeDetailState\">\r\n        </PostDetail>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import PostDetail from \"@/pages/PostPage/components/Post/PostDetail\";\r\n  export default {\r\n    name: \"AdminPage\",\r\n    data() {\r\n      return {\r\n        detailDialogVisible:false,\r\n        dialogVisible: false,\r\n        loading: true,\r\n        reportTableData: [],\r\n        selectUser:0,\r\n        selectPostItem:{},\r\n        adminInfo:{},\r\n        frozenList:[],\r\n      }\r\n    },\r\n    components:{\r\n      PostDetail\r\n    },\r\n    methods: {\r\n      init() {\r\n        // 请求后端数据,查询数据源\r\n        this.$axios.get(`${this.GLOBAL.apiUrl}/getrequireauditpost`)\r\n          .then((response) => {\r\n            console.log(response)\r\n            let data = response.data.postList;\r\n            for (let index in data) {\r\n              this.reportTableData.push(data[index])\r\n            }\r\n            this.frozenList=response.data.frozenList;\r\n            console.log(this.frozenList)\r\n            this.loading = false;\r\n          })\r\n      },\r\n      handleClick(row) {\r\n        this.selectUser = row.userId,\r\n        this.dialogVisible=true\r\n      },\r\n      /**\r\n       * @description 得到管理员信息\r\n       */\r\n      getAdminInfo() {\r\n        this.axios.get(`${this.GLOBAL.apiUrl}/getUserInfo`,{\r\n          params:{\r\n            userId:sessionStorage.getItem(\"adminId\")\r\n          }\r\n        }).then((response) => {\r\n          this.adminInfo=response.data.userInfo.user;\r\n          // console.log(response)\r\n        })\r\n      },\r\n      /**\r\n       * @description 冻结用户\r\n       */\r\n      confirmFrezze() {\r\n        // let data = new FormData();\r\n        // data.append(\"userId\",this.selectUser)\r\n        this.$axios.post(`${this.GLOBAL.apiUrl}/freeze`,{\r\n          userId:this.selectUser\r\n        })\r\n          .then(() => {\r\n            // console.log(response)\r\n          this.$message({\r\n            message:\"冻结成功\",\r\n            type:'success',\r\n          })\r\n        })\r\n        this.dialogVisible = false\r\n      },\r\n      cancelFreeze() {\r\n        this.dialogVisible = false\r\n      },\r\n      /**\r\n       * @description 查看详情\r\n       */\r\n      handleDetail(row) {\r\n        this.selectPostItem=row;\r\n        this.detailDialogVisible=true ;\r\n      },\r\n      changeDetailState () {\r\n        this.detailDialogVisible=false;\r\n      },\r\n      /**\r\n       * @description 冻结用户列被染色\r\n       */\r\n      tableFrozeClass({row,rowIndex}) {\r\n        console.log(row) //删除会认为row没有被使用过而报错.\r\n        // console.log(this.frozenList[rowIndex])\r\n        if(this.frozenList[rowIndex] == 0)\r\n          return \"frozen-row\"\r\n        return ''\r\n      },\r\n      /**\r\n       * @description 处理下拉菜单\r\n       */\r\n      handleCommand(command) {\r\n        switch (command) {\r\n            case 'quit':\r\n              window.location.href = \"/index.html\";\r\n              break;\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.init();\r\n      this.getAdminInfo();\r\n    }\r\n\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n<style>\r\n    .el-header {\r\n        background-color: #81878e;\r\n        color: #333;\r\n        line-height: 60px;\r\n    }\r\n\r\n    .el-aside {\r\n        color: #333;\r\n    }\r\n\r\n    .el-table .frozen-row {\r\n        background-color: #f3b1af;\r\n    }\r\n</style>"]}]}