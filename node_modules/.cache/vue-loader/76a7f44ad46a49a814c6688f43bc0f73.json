{"remainingRequest":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\src\\pages\\PostPage\\components\\Panel\\PanelPostEdit.vue?vue&type=style&index=0&id=719b5c36&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\src\\pages\\PostPage\\components\\Panel\\PanelPostEdit.vue","mtime":1590322633695},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\css-loader\\dist\\cjs.js","mtime":1590322420951},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1590322614254},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\postcss-loader\\src\\index.js","mtime":1590322506421},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\_less-loader@5.0.0@less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590322393809},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js","mtime":1590322614216}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAifkAvQ1NTL0NvbW1vbi5sZXNzIjsKCi5FZGl0UGFuZWwgewogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGVzbW9rZTsKICAgIC5zZXRNaW5TaXplKDg1MHB4LCA1MDBweCk7CiAgICAuc2V0Qm9yZGVyKDBweCk7CiAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICBib3gtc2hhZG93OiAwIDAgM3B4ICMyYzJkMmM7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IGNhbGMoNTAlIC0gMjUwcHgpOwogICAgbGVmdDogY2FsYyg1MCUgLSA0MjVweCk7CiAgICB6LWluZGV4OiAxNTsKICAgIGRpc3BsYXk6IGZsZXg7Cn0KCi5QaWN0dXJlUGFuZWwgewogICAgLnNldFNpemUoNDY4cHgsIDUwMHB4KTsKICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIGJsYWNrOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtd3JhcDogd3JhcDsKICAgIHBhZGRpbmctbGVmdDogMTBweDsKICAgIHBhZGRpbmctdG9wOiAxNXB4Owp9CgoubG9nbyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Cn0KCi5UZXh0UGFuZWwgewogICAgd2lkdGg6IDM1MHB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBwYWRkaW5nOiAwIDlweDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwoKICAgIGxhYmVsIHsKICAgICAgICBtYXJnaW46IDVweCBhdXRvOwogICAgfQp9Cg=="},{"version":3,"sources":["PanelPostEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"PanelPostEdit.vue","sourceRoot":"src/pages/PostPage/components/Panel","sourcesContent":["<template>\r\n    <div class=\"Panel\" v-if=\"isShow\">\r\n        <div @click=\"finishEdit(`close`)\"\r\n             class=\"Mask\"></div>\r\n        <div class=\"EditPanel\">\r\n            <div class=\"PicturePanel\">\r\n                <el-upload\r\n                        ref=\"pictureUploader\"\r\n                        :action=\"domain\"\r\n                        :data=\"postData\"\r\n                        :on-preview=\"handlePictureCardPreview\"\r\n                        :on-remove=\"handleRemove\"\r\n                        :on-success=\"handlePictureSuccess\"\r\n                        :before-upload=\"beforeImgUpload\"\r\n                        list-type=\"picture-card\">\r\n                    <i class=\"el-icon-plus\"></i>\r\n                </el-upload>\r\n                <el-dialog :modal=\"showModal\" :visible.sync=\"dialogVisible\">\r\n                    <el-image :src=\"dialogImageUrl\" alt=\"\" width=\"100%\"></el-image>\r\n                </el-dialog>\r\n            </div>\r\n            <div class=\"TextPanel\">\r\n                <div class=\"logo\">\r\n                    <img src=\"@/assets/NavBar/logo.png\">\r\n                </div>\r\n                <LineWordLine>编辑</LineWordLine>\r\n                <el-form>\r\n                    <el-form-item label=\"文本内容：\">\r\n                        <el-input\r\n                                :row=\"5\"\r\n                                placehoder=\"请输入内容\"\r\n                                type=\"textarea\"\r\n                                v-model=\"postText\">\r\n                        </el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"Tags（请以空格分隔）\">\r\n                        <el-input :disabled=\"true\" v-model=\"tags\"></el-input>\r\n                    </el-form-item>\r\n                    <input @click=\"finishEdit(`finish`)\" class=\"CommonButton\" id=\"TextEditButton\" type=\"button\"\r\n                           value=\"完成\">\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import Bus from \"@/JS/bus.js\"\r\n  import LineWordLine from \"@/components/LineWordLine\";\r\n\r\n  export default {\r\n    name: \"PostPanel\",\r\n    data() {\r\n      return {\r\n        isShow: true,\r\n        tags: '',\r\n        postText: '',\r\n        dialogImageUrl: '',\r\n        dialogVisible: false,\r\n        showModal: false,\r\n        domain: 'https://upload.qiniup.com',\r\n        qiniuaddr: 'http://q9stlq87q.bkt.clouddn.com',\r\n        postData: {\r\n          key: '',\r\n          token: ''\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      /**\r\n       * @description 初始化，获取七牛token\r\n       */\r\n      init() {\r\n        this.userId = sessionStorage.getItem('ID');\r\n        this.axios.get('http://zzzia.net:8080/qiniu/', {\r\n          params: {\r\n            accessKey: \"RwC4uI5jbCfE3IUuokEP7paXOQQA14mcD87MQ6ml\",\r\n            secretKey: \"o6cPmo7R-QUW4113k1MNNiNjWHOyznj-FERyP_xa\",\r\n            bucket: \"dailydata\"\r\n          }\r\n        }).then((response) => {\r\n          this.postData.token = response.data.token\r\n          // this.postData.key = response.data.key\r\n          // console.log(response)\r\n        })\r\n      },\r\n      /**\r\n       * @description 使用事件总线发送完成编辑信号\r\n       * @param {string} flag 完成信号,可能有\"finish\"正常结束，和“close\"直接关闭。\r\n       */\r\n      finishEdit(flag) {\r\n        let that = this;\r\n        this.axios.post(`${this.GLOBAL.apiUrl}/addpost`, {\r\n          postImg: that.dialogImageUrl,\r\n          postContent: that.postText,\r\n          anonym: 0,\r\n          areaId: 0,\r\n          userId: sessionStorage.getItem('ID'),\r\n          forwardPostId: -1,\r\n        })\r\n          .then(() => {\r\n            this.postText='';\r\n            this.dialogImageUrl='';\r\n            this.$refs.pictureUploader.clearFiles();\r\n            console.log(this.dialogImageUrl)\r\n            Bus.$emit(\"finishEdit\", flag);\r\n            // console.log(response)\r\n          })\r\n      },\r\n      beforeImgUpload(file) {\r\n        this.postData.key=`upload_pic_${file.name}`;\r\n      },\r\n      handleRemove(file, fileList) {\r\n        console.log(file, fileList);\r\n      },\r\n      handlePictureCardPreview(file) {\r\n        // console.log(file)\r\n        this.dialogImageUrl = file.url;\r\n        this.dialogVisible = true;\r\n      },\r\n      handlePictureSuccess(res) {\r\n        this.dialogImageUrl = `${this.qiniuaddr}/${res.key}`\r\n        console.log(this.dialogImageUrl)\r\n      }\r\n    },\r\n    components: {\r\n      LineWordLine\r\n    },\r\n    created() {\r\n      this.init()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import \"~@/CSS/Common.less\";\r\n\r\n    .EditPanel {\r\n        background-color: whitesmoke;\r\n        .setMinSize(850px, 500px);\r\n        .setBorder(0px);\r\n        border-radius: 2px;\r\n        box-shadow: 0 0 3px #2c2d2c;\r\n        position: fixed;\r\n        top: calc(50% - 250px);\r\n        left: calc(50% - 425px);\r\n        z-index: 15;\r\n        display: flex;\r\n    }\r\n\r\n    .PicturePanel {\r\n        .setSize(468px, 500px);\r\n        border-right: 1px solid black;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        padding-left: 10px;\r\n        padding-top: 15px;\r\n    }\r\n\r\n    .logo {\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n\r\n    .TextPanel {\r\n        width: 350px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding: 0 9px;\r\n        justify-content: center;\r\n\r\n        label {\r\n            margin: 5px auto;\r\n        }\r\n    }\r\n</style>"]}]}