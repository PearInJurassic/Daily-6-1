{"remainingRequest":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Macbook Pro\\Desktop\\工作区\\src\\pages\\PostPage\\components\\Panel\\PanelTag.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\src\\pages\\PostPage\\components\\Panel\\PanelTag.vue","mtime":1590550714904},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590550697423},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\babel-loader\\lib\\index.js","mtime":1590550697057},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590550697423},{"path":"C:\\Users\\Macbook Pro\\Desktop\\工作区\\node_modules\\vue-loader\\lib\\index.js","mtime":1590550713661}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBhbmVsVGFnIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHluYW1pY1RhZ3M6IFtdLAogICAgICBpbnB1dFZpc2libGU6IGZhbHNlLAogICAgICBpbnB1dFZhbHVlOiAnJwogICAgfTsKICB9LAogIHByb3BzOnsKICAgIGl0ZW06ewogICAgICByZXF1aXJlZDp0cnVlLAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2xvc2UodGFnKSB7CgogICAgICB0aGlzLmF4aW9zLmdldChgJHt0aGlzLkdMT0JBTC5hcGlVcmx9L3JlbW92ZXRhZ2AsewogICAgICAgIHBhcmFtczp7CiAgICAgICAgICB0YWdJZDp0YWcudGFnSWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PnsKICAgICAgICBpZihyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuZHluYW1pY1RhZ3Muc3BsaWNlKHRoaXMuZHluYW1pY1RhZ3MuaW5kZXhPZih0YWcpLCAxKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOmB0YWcke3RhZy50YWdDb250ZW50feWIoOmZpOaIkOWKn2AsCiAgICAgICAgICAgIHR5cGU6J3N1Y2Nlc3MnCiAgICAgICAgICB9KQoKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIHNob3dJbnB1dCgpIHsKICAgICAgdGhpcy5pbnB1dFZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayggKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuc2F2ZVRhZ0lucHV0LiRyZWZzLmlucHV0LmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVJbnB1dENvbmZpcm0oKSB7CiAgICAgIGxldCBpbnB1dFZhbHVlID0gdGhpcy5pbnB1dFZhbHVlOwogICAgICBpZiAoaW5wdXRWYWx1ZSkgewogICAgICAgIHRoaXMuYXhpb3MucG9zdChgJHt0aGlzLkdMT0JBTC5hcGlVcmx9L2FkZHRhZ2AsewogICAgICAgICAgICB0YWdDb250ZW50OmlucHV0VmFsdWUsCiAgICAgICAgICAgIHBvc3RJZDp0aGlzLml0ZW0ucG9zdElkLAogICAgICAgIH0pCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpPT57CiAgICAgICAgICB0aGlzLmR5bmFtaWNUYWdzLnB1c2goCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0YWdJZDpyZXNwb25zZS5kYXRhLnRhZ0lkLAogICAgICAgICAgICAgIHRhZ0NvbnRlbnQ6IGlucHV0VmFsdWUKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgfQogICAgICB0aGlzLmlucHV0VmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmlucHV0VmFsdWUgPSAnJzsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICB0aGlzLmF4aW9zLmdldChgJHt0aGlzLkdMT0JBTC5hcGlVcmx9Ly9saXN0dGFnYCx7CiAgICAgIHBhcmFtczp7CiAgICAgICAgcG9zdElkOiB0aGF0Lml0ZW0ucG9zdElkLAogICAgICB9CiAgICB9KS50aGVuKChyZXNwb25zZSk9PnsKICAgICAgbGV0IHRhZ0xpc3QgPSByZXNwb25zZS5kYXRhLnRhZ0xpc3QKICAgICAgZm9yKGxldCBpbmRleCBpbiB0YWdMaXN0KSB7CiAgICAgICAgdGhpcy5keW5hbWljVGFncy5wdXNoKHRhZ0xpc3RbaW5kZXhdKTsKICAgICAgfQogICAgfSkKICB9Cn0K"},{"version":3,"sources":["PanelTag.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PanelTag.vue","sourceRoot":"src/pages/PostPage/components/Panel","sourcesContent":["<template>\r\n    <div class=\"TagAll\">\r\n        <el-tag\r\n                :key=\"index\"\r\n                v-for=\"(tag,index) in dynamicTags\"\r\n                closable\r\n                :disable-transitions=\"false\"\r\n                @close=\"handleClose(tag)\">\r\n            {{tag.tagContent}}\r\n        </el-tag>\r\n        <el-input\r\n                class=\"input-new-tag\"\r\n                v-if=\"inputVisible\"\r\n                v-model=\"inputValue\"\r\n                ref=\"saveTagInput\"\r\n                size=\"small\"\r\n                @keyup.enter.native=\"handleInputConfirm\"\r\n                @blur=\"handleInputConfirm\"\r\n        >\r\n        </el-input>\r\n        <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Tag</el-button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  export default {\r\n    name: \"PanelTag\",\r\n    data() {\r\n      return {\r\n        dynamicTags: [],\r\n        inputVisible: false,\r\n        inputValue: ''\r\n      };\r\n    },\r\n    props:{\r\n      item:{\r\n        required:true,\r\n      }\r\n    },\r\n    methods: {\r\n      handleClose(tag) {\r\n\r\n        this.axios.get(`${this.GLOBAL.apiUrl}/removetag`,{\r\n          params:{\r\n            tagId:tag.tagId\r\n          }\r\n        }).then((response) =>{\r\n          if(response.data.success) {\r\n            this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\r\n            this.$message({\r\n              message:`tag${tag.tagContent}删除成功`,\r\n              type:'success'\r\n            })\r\n\r\n          }\r\n        })\r\n      },\r\n\r\n      showInput() {\r\n        this.inputVisible = true;\r\n        this.$nextTick( () => {\r\n          this.$refs.saveTagInput.$refs.input.focus();\r\n        });\r\n      },\r\n\r\n      handleInputConfirm() {\r\n        let inputValue = this.inputValue;\r\n        if (inputValue) {\r\n          this.axios.post(`${this.GLOBAL.apiUrl}/addtag`,{\r\n              tagContent:inputValue,\r\n              postId:this.item.postId,\r\n          })\r\n            .then((response)=>{\r\n            this.dynamicTags.push(\r\n              {\r\n                tagId:response.data.tagId,\r\n                tagContent: inputValue\r\n              });\r\n          })\r\n        }\r\n        this.inputVisible = false;\r\n        this.inputValue = '';\r\n      }\r\n    },\r\n    created() {\r\n      let that = this;\r\n      this.axios.get(`${this.GLOBAL.apiUrl}//listtag`,{\r\n        params:{\r\n          postId: that.item.postId,\r\n        }\r\n      }).then((response)=>{\r\n        let tagList = response.data.tagList\r\n        for(let index in tagList) {\r\n          this.dynamicTags.push(tagList[index]);\r\n        }\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n    .TagAll {\r\n        margin: 15px 12px;\r\n    }\r\n    .el-tag + .el-tag {\r\n        margin-left: 10px;\r\n    }\r\n    .button-new-tag {\r\n        margin-left: 10px;\r\n        height: 32px;\r\n        line-height: 30px;\r\n        padding-top: 0;\r\n        padding-bottom: 0;\r\n    }\r\n    .input-new-tag {\r\n        width: 90px;\r\n        margin-left: 10px;\r\n        vertical-align: bottom;\r\n    }\r\n</style>"]}]}