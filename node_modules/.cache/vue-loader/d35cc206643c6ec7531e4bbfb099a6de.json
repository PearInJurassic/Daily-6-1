{"remainingRequest":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\src\\pages\\PostPage\\components\\Panel\\PanelComment.vue?vue&type=style&index=1&lang=less&","dependencies":[{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\src\\pages\\PostPage\\components\\Panel\\PanelComment.vue","mtime":1590322633695},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\css-loader\\dist\\cjs.js","mtime":1590322420951},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1590322614254},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\postcss-loader\\src\\index.js","mtime":1590322506421},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\_less-loader@5.0.0@less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590322393809},{"path":"C:\\Users\\linjie\\Desktop\\分享\\Daily-6-1\\node_modules\\vue-loader\\lib\\index.js","mtime":1590322614216}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLkNvbW1lbnQgewogICAgLmVsLWNvbGxhcHNlLWl0ZW1fX2hlYWRlciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBtaW4taGVpZ2h0OiA2NXB4OwogICAgICAgIG1heC1oZWlnaHQ6IDEwNXB4OwogICAgICAgIGxpbmUtaGVpZ2h0OiAxNXB4OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlc21va2U7CiAgICB9Cn0KCi5lbC1pY29uLWFycm93LXJpZ2h0IHsKCn0K"},{"version":3,"sources":["PanelComment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"PanelComment.vue","sourceRoot":"src/pages/PostPage/components/Panel","sourcesContent":["<template>\r\n    <div class=\"ContentAll\">\r\n        <div class=\"PosterInfo\">\r\n            <div class=\"Avatar\">\r\n                <div @click=\"gotoPerson(postInfo.userId)\" class=\"avatar\">\r\n                <el-avatar :size=\"42\" :src=\"postInfo.userImg\"></el-avatar>\r\n                </div>\r\n                <el-tooltip class=\"item\" effect=\"dark\" content=\"关注用户\" placement=\"right\">\r\n                <button class=\"IconButton\" id=\"followButton\">\r\n                    <img :src=\"followUrl\" @click=\"follow\" alt=\"关注按钮\">\r\n                </button>\r\n                </el-tooltip>\r\n            </div>\r\n            <div class=\"Icon\">\r\n                <el-tooltip class=\"item\" effect=\"dark\" content=\"举报该帖\" placement=\"left\">\r\n                <button class=\"IconButton\" id=\"reportButton\">\r\n                    <img :src=\"reportUrl\" @click=\"reportPost\" alt=\"举报按钮\">\r\n                </button>\r\n                </el-tooltip>\r\n            </div>\r\n        </div>\r\n        <div class=\"Comment\">\r\n            <p v-if=\"commentNum.length==0\">暂无评论，我来发表第一篇评论！</p>\r\n            <el-collapse @change=\"change\" accordion v-model=\"activeName\">\r\n                <el-collapse-item :key=\"index\"\r\n                                  :name=\"item[0].commentId\"\r\n                                  v-for=\"(item,index) in commentNum\">\r\n                    <template slot=\"title\">\r\n                        <div class=\"CommentPanel\">\r\n                            <PostCommentAll :headComment=\"item[0]\"></PostCommentAll>\r\n                        </div>\r\n                    </template>\r\n                    <PostCommentChild :headComment=\"item[index]\"\r\n                                      :key=\"index\" v-for=\"(i,index) in item\">\r\n                    </PostCommentChild>\r\n                </el-collapse-item>\r\n            </el-collapse>\r\n            <div style=\"width:280px;height:30px;background-color: #3c3d3e\"></div>\r\n        </div>\r\n        <div class=\"IconGroup\" style=\"display: flex\">\r\n            <div class=\"Icon\">\r\n                <button @click=\"pressLikeButton\" class=\"IconButton\" id=\"likeButton\">\r\n                    <img :src=\"likeUrl\" alt=\"喜欢按钮\">\r\n                </button>\r\n            </div>\r\n            <div class=\"LikeNum Icon\">\r\n                {{likeNums}}\r\n            </div>\r\n            <div class=\"Icon\">\r\n                <button class=\"IconButton\" id=\"ResendButton\">\r\n                    <img alt=\"转发按钮\" src=\"@/assets/Post/resend.png\">\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class=\"CommentAdder\">\r\n            <el-input\r\n                    maxlength=\"130\"\r\n                    placehoder=\"请输入评论\"\r\n                    show-word-limit\r\n                    type=\"textarea\"\r\n                    v-model=\"commentText\">\r\n            </el-input>\r\n            <button @click=\"addComment\" class=\"CommonButton\">发布</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import PostCommentAll from \"@/pages/PostPage/components/Post/PostCommentAll\";\r\n  import PostCommentChild from \"@/pages/PostPage/components/Post/PostCommentChild\";\r\n\r\n  export default {\r\n    name: \"PanelComment\",\r\n    data() {\r\n      return {\r\n        // replyTarget: `\"@\":`,\r\n        activeName: 1,\r\n        headUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\r\n        reportUrl: require(\"@/assets/Post/report.png\"),\r\n        like: this.isLike,\r\n        likeNums: 0,\r\n        likeImgArr: ['like.png', 'like-fill.png'],\r\n        commentNum: [],\r\n        commentText: '',\r\n        PostCommentAll: \"PostCommentAll\",\r\n        followUrl: require(\"@/assets/Post/follow.png\"),\r\n      }\r\n    },\r\n    props: {\r\n      isLike: {\r\n        required: true\r\n      },\r\n      item: {\r\n        required: true\r\n      },\r\n      postInfo: {\r\n        required: true\r\n      }\r\n    },\r\n    computed: {\r\n      likeUrl() {\r\n        return require(`@/assets/Post/${this.likeImgArr[this.like]}`);\r\n      },\r\n      // commentContentAll() {\r\n      //   return this.replyTarget + this.commentText\r\n      // }\r\n    },\r\n    components: {\r\n      PostCommentAll,\r\n      PostCommentChild\r\n    },\r\n    methods: {\r\n      //TODO 评论页面点击头像进入个人空间\r\n      /**\r\n       * @description 跳转到个人空间\r\n       */\r\n      gotoPerson(otherId) {\r\n        if (otherId == sessionStorage.getItem('ID')) {\r\n          this.$router.push('/personpage')\r\n        } else {\r\n          this.$router.push(`/others/${otherId}`)\r\n        }\r\n      },\r\n      /**\r\n       * @description 传递点赞按钮事件的函数\r\n       */\r\n      pressLikeButton() {\r\n        this.like ? this.like = 0 : this.like = 1;\r\n        let that = this;\r\n        if (this.like === 1) {\r\n          this.axios.post(`${this.GLOBAL.apiUrl}/addlike`, {\r\n            userId: sessionStorage.getItem(\"ID\"),\r\n            postId: that.item.postId,\r\n          })\r\n            .then(() => {\r\n              this.$emit(\"childAddLike\")\r\n              this.likeNums++;\r\n            })\r\n        } else {\r\n          this.axios.get(`${this.GLOBAL.apiUrl}/removelike`, {\r\n            params: {\r\n              userId: sessionStorage.getItem(\"ID\"),\r\n              postId: that.item.postId,\r\n            }\r\n          })\r\n            .then(() => {\r\n              this.likeNums++;\r\n              this.$emit(\"childRemoveLike\")\r\n            })\r\n        }\r\n      },\r\n      /**\r\n       * @description 发布评论\r\n       */\r\n      addComment() {\r\n        let pattern = /^(\"@)(\\d)+/;\r\n        let r = this.commentText.match(pattern);\r\n        let replyCommentId = (r == null) ? 0 : r[0].split('@')[1];\r\n        this.axios.post(`${this.GLOBAL.apiUrl}/comment/createcomment`, {\r\n          \"commentContent\": this.commentText,\r\n          \"postId\": this.item.postId,\r\n          \"userId\": sessionStorage.getItem(\"ID\"),\r\n          \"anonym\": 0,\r\n          replyCommentId\r\n        })\r\n          .then((response) => {\r\n            // this.commentNum.push(response.data.newComment);\r\n            console.log(response)\r\n          })\r\n        // this.commentNum.push(this.commentText);\r\n        this.commentText = ''\r\n      },\r\n      /**\r\n       * @description 举报帖子\r\n       */\r\n      reportPost() {\r\n        this.$confirm('你确定要举报此贴吗?', '举报', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        })\r\n          .then(() => {\r\n            this.axios.get(`${this.GLOBAL.apiUrl}/tipoffpost`, {\r\n              params: {\r\n                postId: this.item.postId,\r\n              }\r\n            })\r\n              .then(() => {\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '举报成功！'\r\n                });\r\n                // console.log(response)\r\n              })\r\n          })\r\n          .catch(() => {\r\n            this.$message({\r\n              type: 'info',\r\n              message: '已取消举报操作'\r\n            })\r\n          })\r\n      },\r\n      /**\r\n       * @description 关注用户\r\n       */\r\n      follow() {\r\n        this.axios.get(`${this.GLOBAL.apiUrl}/addFollow`, {\r\n          params: {\r\n            userId: sessionStorage.getItem('ID'),\r\n            followId: this.postInfo.userId,\r\n          }\r\n        }).then(() => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '关注成功！'\r\n          });\r\n        })\r\n      },\r\n      /**\r\n       * @description 获取评论列表\r\n       */\r\n      getComments() {\r\n        this.axios.get(`${this.GLOBAL.apiUrl}/comment/getcommentbypostid`, {\r\n          params: {\r\n            postId: this.item.postId\r\n          }\r\n        }).then((response) => {\r\n          console.log(response)\r\n          let commentList = response.data.commentList;\r\n          for (let index in commentList) {\r\n            this.commentNum.push(commentList[index])\r\n            // console.log(commentList[index], index)\r\n          }\r\n        })\r\n      },\r\n      /**\r\n       * @description 获取点赞数\r\n       */\r\n      getLikeNums() {\r\n        this.axios.get(`${this.GLOBAL.apiUrl}/getlikenum`, {\r\n          params: {\r\n            postId: this.item.postId\r\n          }\r\n        }).then((response) => {\r\n          this.likeNums = response.data.likeNum;\r\n        })\r\n      },\r\n      /**\r\n       * @description 点击某栏后的操作\r\n       * @param activeNum 点击某栏后获得的栏号，此处是评论的id\r\n       */\r\n      change(activeNum) {\r\n        this.commentText = `\"@${activeNum}\":`\r\n      }\r\n    },\r\n    created() {\r\n      //获取评论列表。\r\n      this.getComments();\r\n      this.getLikeNums();\r\n    },\r\n\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import \"~@/CSS/Common.less\";\r\n\r\n    p {\r\n        margin: 15px auto;\r\n    }\r\n\r\n    .PosterInfo {\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n\r\n    .LikeNum {\r\n        color: #7f7f7f;\r\n    }\r\n\r\n    .Icon {\r\n        background-color: white;\r\n    }\r\n\r\n    .IconButton {\r\n        background-color: white;\r\n    }\r\n\r\n    .Comment {\r\n        margin: 2px auto;\r\n        display: flex;\r\n        .setSize(280px, 400px);\r\n        .setBorder();\r\n        flex-direction: column;\r\n        justify-content: flex-start;\r\n        overflow: auto;\r\n    }\r\n\r\n    .ContentAll {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .CommentAdder {\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n        .setSize(280px, 100px);\r\n        margin: 2px auto 10px auto;\r\n    }\r\n\r\n    .CommentEditor {\r\n        .setSize(100%, 100%);\r\n        .setBorder();\r\n        background-color: white;\r\n        margin: 2px 0 -30px 0;\r\n    }\r\n\r\n    .CommentPanel {\r\n        width: 100%;\r\n    }\r\n\r\n    .Avatar {\r\n        display: flex;\r\n        .avatar:hover {\r\n            cursor: pointer;\r\n        }\r\n    }\r\n\r\n</style>\r\n\r\n<style lang=\"less\">\r\n    .Comment {\r\n        .el-collapse-item__header {\r\n            display: flex;\r\n            min-height: 65px;\r\n            max-height: 105px;\r\n            line-height: 15px;\r\n            background-color: whitesmoke;\r\n        }\r\n    }\r\n\r\n    .el-icon-arrow-right {\r\n\r\n    }\r\n</style>"]}]}