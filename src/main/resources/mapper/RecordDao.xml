<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.massizhi.daily.dao.RecordDao">
    <select id="getRecordListByUserId" resultType="com.massizhi.daily.entity.Record">
        SELECT record_id,record_img,record_content,record_create_time,
        record_update_time,time_axis_id,area_id,post_id,user_id
        FROM tb_record
        WHERE
        user_id=#{userId}
        ORDER BY record_create_time
        DESC
    </select>
    <select id="getRecordListByTwoId" resultType="com.massizhi.daily.entity.Record">
        SELECT record_id,record_img,record_content,record_create_time,
        record_update_time,time_axis_id,area_id,post_id,user_id
        FROM tb_record
        WHERE
        user_id=#{userId}
        AND
        time_axis_id=#{timeAxisId}
        ORDER BY record_create_time
        DESC
    </select>
    <insert id="insertRecord" useGeneratedKeys="true" keyProperty="recordId"
            keyColumn="record_id" parameterType="com.massizhi.daily.entity.Record">
        INSERT INTO
        tb_record(record_img,record_content,record_create_time,
        record_update_time,time_axis_id,area_id,post_id,user_id)
        VALUES
        (#{recordImg},#{recordContent},#{recordCreateTime},
        #{recordUpdateTime},#{timeAxisId},#{areaId},#{postId},#{userId})
    </insert>
    <update id="updateRecord" parameterType="com.massizhi.daily.entity.Record">
        update tb_record
        <set>
            <if test="recordImg != null">record_img=#{recordImg},</if>
            <if test="recordContent != null">record_content=#{recordContent},</if>
            <if test="recordUpdateTime != null">record_update_time=#{recordUpdateTime},</if>
            <if test="areaId != null">areaId=#{areaId},</if>
            <if test="postId != null">postId=#{postId},</if>
        </set>
        where record_id=#{recordId}
    </update>
    <delete id="deleteRecord">
        DELETE FROM
        tb_record
        WHERE
        record_id=#{recordId}
    </delete>
</mapper>