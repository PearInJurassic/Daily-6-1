(function(e){function t(t){for(var n,a,r=t[0],l=t[1],c=t[2],m=0,d=[];m<r.length;m++)a=r[m],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,r=1;r<i.length;r++){var l=i[r];0!==o[l]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},o={index:0},s=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;s.push([0,"chunk-vendors","chunk-common"]),i()})({0:function(e,t,i){e.exports=i("e7b5")},"0dfa":function(e,t,i){"use strict";var n=i("c3d5"),o=i.n(n);o.a},"12b2":function(e,t,i){},4433:function(e,t,i){"use strict";var n=i("8068"),o=i.n(n);o.a},8068:function(e,t,i){},c3d5:function(e,t,i){},e5c3:function(e,t,i){"use strict";var n=i("12b2"),o=i.n(n);o.a},e7b5:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("LoginPanel")],1)},s=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"LoginPanelAll"},[i("div",{staticClass:"LoginBack"},[e._m(0),i("div",{staticClass:"LoginPanel"},[i("el-form",{attrs:{model:e.form,rules:e.rules,"label-width":"65px"}},[i("el-form-item",{attrs:{label:"用户名",prop:"username"}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),i("el-form-item",{staticStyle:{display:"flex","justify-content":"right","padding-right":"20px"}},[i("el-switch",{attrs:{"active-text":"我是管理员","inactive-text":"我是用户"},model:{value:e.loginRole,callback:function(t){e.loginRole=t},expression:"loginRole"}})],1),i("div",{staticStyle:{padding:"0 20px"}},[i("input",{staticClass:"CommonButton",attrs:{id:"TextEditButton",type:"button",value:"登录"},on:{click:e.login}})])],1),i("LineWordLine",[e._v("有问题？")]),i("div",{staticClass:"ResetPassword"},[i("el-link",{on:{click:e.retrieveCi}},[e._v("忘记密码")])],1)],1),i("div",{staticClass:"SignInPanel"},[i("span",[e._v("没有账号？")]),i("span",[i("el-link",{attrs:{type:"primary"},on:{click:e.signIn}},[e._v("注册")])],1)])]),i("el-dialog",{attrs:{visible:e.dialogVisible,title:"注册账号",width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("PanelSignIn",{on:{finishSignIn:e.finishSignIn}})],1),i("el-dialog",{attrs:{visible:e.dialogVisible2,title:"邮箱验证",width:"30%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[i("el-form",{attrs:{model:e.form2,rules:e.rules}},[i("el-form-item",{attrs:{label:"请输入你的注册邮箱",prop:"email"}},[i("el-input",{model:{value:e.form2.email,callback:function(t){e.$set(e.form2,"email",t)},expression:"form2.email"}})],1),i("el-button",{attrs:{type:"primary"},on:{click:e.emailSend}},[e._v("发送验证码")])],1)],1),i("el-dialog",{attrs:{visible:e.dialogVisible3,title:"验证码填写",width:"30%"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[i("el-form",{attrs:{model:e.form2,rules:e.rules}},[i("el-form-item",{attrs:{label:"请输入你收到的验证码"}},[i("el-input",{model:{value:e.form2.code,callback:function(t){e.$set(e.form2,"code",t)},expression:"form2.code"}})],1),i("el-button",{attrs:{type:"primary"},on:{click:e.receiveCode}},[e._v("确定")])],1)],1),i("el-dialog",{attrs:{visible:e.dialogVisible4,title:"重置密码",width:"30%"},on:{"update:visible":function(t){e.dialogVisible4=t}}},[i("el-form",{attrs:{model:e.form2,rules:e.rules}},[i("el-form-item",{attrs:{label:"请输入你的新密码",prop:"password"}},[i("el-input",{model:{value:e.form2.password,callback:function(t){e.$set(e.form2,"password",t)},expression:"form2.password"}})],1),i("el-button",{attrs:{type:"primary"},on:{click:e.rePassword}},[e._v("确定")])],1)],1)],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"LoginFront"},[n("img",{attrs:{src:i("1b9f")}})])}],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%"}},[e._m(0),i("LineWordLine",[e._v("开始注册")]),i("div",{staticClass:"SignInPanel"},[i("el-form",{attrs:{model:e.signInForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[i("el-input",{model:{value:e.signInForm.email,callback:function(t){e.$set(e.signInForm,"email",t)},expression:"signInForm.email"}})],1),i("el-form-item",{attrs:{label:"验证码"}},[i("el-col",{attrs:{span:9}},[i("el-input",{attrs:{label:"请输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.signInForm.code,callback:function(t){e.$set(e.signInForm,"code",t)},expression:"signInForm.code"}})],1),i("el-col",{attrs:{span:1}},[i("p")]),i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{disabled:1==e.btnState},on:{click:e.getCode}},[e._v(e._s(e.btntxt))])],1)],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{"show-password":""},model:{value:e.signInForm.password,callback:function(t){e.$set(e.signInForm,"password",t)},expression:"signInForm.password"}})],1),i("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[i("el-input",{model:{value:e.signInForm.nickName,callback:function(t){e.$set(e.signInForm,"nickName",t)},expression:"signInForm.nickName"}})],1),i("el-form-item",{staticClass:"TwoButton"},[i("el-button",{attrs:{type:"primary"},on:{click:e.success}},[e._v("注册")]),i("el-button",{attrs:{type:"info"},on:{click:e.finish}},[e._v("取消")])],1)],1)],1)],1)},c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("img",{attrs:{alt:"logo",height:"60px",src:i("1b9f")}})])}],u=i("3cc0"),m={name:"PanelSignIn",data:function(){return{btntxt:"获取验证码",verCode:0,btnState:0,signInForm:{email:"",password:"",nickName:"",code:""},rules:{email:[{required:!0,message:"请输入用户名邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:28,message:"密码长度在6-18位之间",trigger:"blur"},{pattern:/^[a-zA-Z](\w){5,17}$/,message:"以字母开头，长度在6-18之间， 只能包含字符、数字和下划线"}],nickName:[{required:!0,message:"请输入您的注册昵称",trigger:"blur"}]}}},components:{LineWordLine:u["a"]},methods:{getCode:function(){var e=this;this.$notify({title:"验证码已发送",message:"验证码已发送至".concat(this.signInForm.email),type:"success",duration:3500}),this.axios.get("".concat(this.GLOBAL.apiUrl,"/getVerificationCode"),{params:{emailCode:this.signInForm.email}}).then((function(t){e.verCode=t.data.verificationCode,console.log(e.verCode),e.btntxt="重新发送"})).catch((function(e){console.log(e)}))},onSubmit:function(){this.signInForm.code==this.verCode&&(this.btnState=1,this.$notify({title:"验证码通过",message:"验证码通过",type:"success",duration:3500}))},success:function(){var e=this;this.axios.post("http://47.107.77.163:8080/demo/register",{userType:0,email:this.signInForm.email,userName:this.signInForm.nickName,userPwd:this.signInForm.password}).then((function(t){var i=t.data.code;1===i?(e.$emit("finishSignIn"),e.$notify({title:"注册成功",message:"您的账号".concat(e.signInForm.email,"已经完成注册"),type:"success",duration:3500})):e.$notify.error({title:"注册失败",message:"您的账号".concat(e.signInForm.email,"已经被注册"),duration:3500})}))},finish:function(){this.$emit("finishSignIn")}}},d=m,f=(i("4433"),i("2877")),g=Object(f["a"])(d,l,c,!1,null,"3edfe3fb",null),p=g.exports,b={name:"LoginPanel",data:function(){return{form:{username:"",password:""},form2:{email:"",code:"",password:""},rules:{email:[{required:!0,message:"请输入用户名邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],username:[{required:!0,message:"请输入用户名邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:28,message:"密码长度在6-18位之间",trigger:"blur"},{pattern:/^[a-zA-Z](\w){5,17}$/,message:"以字母开头，长度在6-18之间， 只能包含字符、数字和下划线"}]},loginRole:0,dialogVisible:!1,dialogVisible2:!1,dialogVisible3:!1,dialogVisible4:!1,verCode:0}},components:{PanelSignIn:p,LineWordLine:u["a"]},methods:{login:function(){var e=this,t=this.loginRole?1:0;console.log("login"),this.axios.post("http://47.107.77.163:8080/demo/login",{email:this.form.username,password:this.form.password,userType:t}).then((function(i){console.log(i);var n=i.data.code;if(1===n){var o=i.data.userId;0===t?(window.location.href="./PostPage.html",sessionStorage.setItem("ID",o),sessionStorage.setItem("isFirstLogin",1)):(window.location.href="./AdminPage.html",sessionStorage.setItem("adminId",o))}else 2===n?e.$notify.error({title:"登陆失败",message:"您的账号".concat(e.form.username,"不存在，请点击注册按钮进行注册"),duration:3500}):3===n&&e.$notify.error({title:"登陆失败",message:"您的密码输入错误",duration:3500})}))},finishSignIn:function(){this.dialogVisible=!1},signIn:function(){this.dialogVisible=!0},retrieveCi:function(){this.dialogVisible2=!0},emailSend:function(){var e=this;console.log(this.form2.email),this.axios.get("".concat(this.GLOBAL.apiUrl,"/getVerificationCode"),{params:{emailCode:this.form2.email}}).then((function(t){e.verCode=t.data.verificationCode,e.dialogVisible2=!1,e.dialogVisible3=!0,console.log(t.data.verificationCode),e.$message({message:"验证码已发送",type:"success"})})).catch((function(e){console.log(e)}))},receiveCode:function(){this.verCode==this.form2.code?(this.dialogVisible3=!1,this.dialogVisible4=!0,this.$message({message:"验证码正确",type:"success"})):this.$message({message:"验证码错误",type:"warning"})},rePassword:function(){var e=this;this.axios.get("".concat(this.GLOBAL.apiUrl,"/getVerificationCode"),{params:{emailCode:this.form2.email}}).then((function(t){e.verCode=t.data.verificationCode,e.dialogVisible2=!1,e.dialogVisible3=!0,console.log(t.data.verificationCode),e.$message({message:"验证码已发送",type:"success"}),e.dialogVisible4=!1})).catch((function(e){console.log(e)}))}}},h=b,v=(i("0dfa"),Object(f["a"])(h,a,r,!1,null,"a4f10748",null)),y=v.exports,w={name:"LoginPage",data:function(){return{}},components:{LoginPanel:y}},x=w,I=(i("e5c3"),Object(f["a"])(x,o,s,!1,null,"0e324370",null)),k=I.exports,C=i("5c96"),_=i.n(C),$=(i("0fae"),i("a7fe")),S=i.n($),L=i("bc3a"),P=i.n(L),V=i("d842"),F=i.n(V),O=(i("2ba8"),i("c41d"));n["default"].prototype.$layer=F()(n["default"]),n["default"].prototype.GLOBAL=O["a"],n["default"].config.productionTip=!1,n["default"].use(_.a),n["default"].use(S.a,P.a),new n["default"]({render:function(e){return e(k)}}).$mount("#app")}});
//# sourceMappingURL=index.22c2f85f.js.map